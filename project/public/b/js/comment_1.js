(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{0:function(t,e,a){"use strict";var n=Object.prototype.hasOwnProperty;function i(t,e){return Array.isArray(t)?function(t,e){for(var a,n="",o="",r=Array.isArray(e),c=0;c<t.length;c++)(a=i(t[c]))&&(r&&e[c]&&(a=s(a)),n=n+o+a,o=" ");return n}(t,e):t&&"object"==typeof t?function(t){var e="",a="";for(var i in t)i&&t[i]&&n.call(t,i)&&(e=e+a+i,a=" ");return e}(t):t||""}function o(t){if(!t)return"";if("object"==typeof t){var e="";for(var a in t)n.call(t,a)&&(e=e+a+":"+t[a]+";");return e}return t+""}function r(t,e,a,n){if(!1===e||null==e||!e&&("class"===t||"style"===t))return"";if(!0===e)return" "+(n?t:t+'="'+t+'"');var i=typeof e;return"object"!==i&&"function"!==i||"function"!=typeof e.toJSON||(e=e.toJSON()),"string"==typeof e||(e=JSON.stringify(e),a||-1===e.indexOf('"'))?(a&&(e=s(e))," "+t+'="'+e+'"'):" "+t+"='"+e.replace(/'/g,"&#39;")+"'"}e.merge=function t(e,a){if(1===arguments.length){for(var n=e[0],i=1;i<e.length;i++)n=t(n,e[i]);return n}for(var r in a)if("class"===r){var c=e[r]||[];e[r]=(Array.isArray(c)?c:[c]).concat(a[r]||[])}else if("style"===r){var c=o(e[r]);c=c&&";"!==c[c.length-1]?c+";":c;var s=o(a[r]);s=s&&";"!==s[s.length-1]?s+";":s,e[r]=c+s}else e[r]=a[r];return e},e.classes=i,e.style=o,e.attr=r,e.attrs=function(t,e){var a="";for(var c in t)if(n.call(t,c)){var s=t[c];if("class"===c){s=i(s),a=r(c,s,!1,e)+a;continue}"style"===c&&(s=o(s)),a+=r(c,s,!1,e)}return a};var c=/["&<>]/;function s(t){var e=""+t,a=c.exec(e);if(!a)return t;var n,i,o,r="";for(n=a.index,i=0;n<e.length;n++){switch(e.charCodeAt(n)){case 34:o="&quot;";break;case 38:o="&amp;";break;case 60:o="&lt;";break;case 62:o="&gt;";break;default:continue}i!==n&&(r+=e.substring(i,n)),i=n+1,r+=o}return i!==n?r+e.substring(i,n):r}e.escape=s,e.rethrow=function t(e,n,i,o){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&n||o))throw e.message+=" on line "+i,e;try{o=o||a(4).readFileSync(n,"utf8")}catch(a){t(e,null,i)}var r=3,c=o.split("\n"),s=Math.max(i-r,0),l=Math.min(c.length,i+r);var r=c.slice(s,l).map(function(t,e){var a=e+s+1;return(a==i?"  > ":"    ")+a+"| "+t}).join("\n");e.path=n;e.message=(n||"Pug")+":"+i+"\n"+r+"\n\n"+e.message;throw e}},1:function(t,e,a){var n;void 0===(n=function(){var i,o={},r=$("body"),c={},s=a(5),l={v:"1.0",index:0,Zindex:200,confirm:function(t){var e=$.extend({},t,{type:"confirm"});return l.open(e)},tip:function(t,e){var a={type:"tip",container:t,closeBtn:!1,isOverlay:!1,time:e||1500};return l.open(a)},loading:function(t){t=$.extend({closeBtn:!1,isLoding:!0,type:0,text:"拼命加载中...",showText:!1},t);return l.open(t)}},d=function(){this.defaults={container:null,isOverlay:!0,overlayClose:!1,closeBtn:!0,success:null,end:null}};d.prototype={getOptions:function(t){return $.extend({},this.defaults,t)},removeNode:function(t){t.remove()}};var m=new d,u=function(t){this.index=++l.index,this.Zindex=l.Zindex+this.index,this.creat()};return(u.pt=u.prototype).creat=function(){var t=this,e=t.index,a=t.Zindex,n=$('<div id="dialog_box'+e+'" class="dialog_box '+(o.class||"")+'"></div>');if(n.css({margin:0,padding:0,width:o.width||"auto",height:o.height||"auto","z-index":a,top:"50%",left:"50%",position:"fixed","background-color":o.isLoding?"transparent":"#fff",textAlign:o.isLoding?"center":"left"}),o.isLoding&&n.html(s(o)),o.title)n.append(function(t){var e;return function(){e=$('<div class="dialog-header"></div>');var a=$('<span class="dialog-title" title="'+o.title+'">'+o.title+"</span>"),n=$('<i class="dialog-close iconfont cf-guanbi" id="dialog_close'+t+'" title="关闭"></i>');return e.append(a).append(n),e}()}(e));else if(o.closeBtn){var c=$('<i class="dialog-close iconfont cf-diff-close cf-guanbi" id="dialog_close'+e+'" title="关闭"></i>');n.append(c)}if(o.isOverlay){var d=function(t,e){var a;return a=$('<div id="overlay'+t+'" class="overlay"></div>'),a.css({margin:0,padding:0,border:"none",width:"100%",height:"100%","z-index":e,background:"#000",opacity:"0.5",filter:"alpha(opacity=50)",position:"fixed",top:0,left:0}),a}(e,a);r.append(d)}if(r.append(n),t.dialogBox=n,"confirm"===o.type){t.yes=o.yes,t.cancel=o.cancel,i=$('<div class="confirm-layer"></div>');var m=$('<span class="btn-sure btn btn-primary">'+(o.yesText||"确定")+"</span>"),u=$('<span class="btn-cancel btn btn-gray">取消</span>');i.html('<div class="confirm-text">'+o.container+'</div><div class="operate-btn"></div>'),i.find(".operate-btn").append(m).append(u),m.click(function(){"function"==typeof t.yes&&t.yes()}),u.click(function(){"function"==typeof t.cancel&&t.cancel()})}else"tip"===o.type?(i=$('<div class="text-tip"></div>'),$("body").append('<div class="text-tip-overlay"></div>'),i.html(o.container),setTimeout(function(){$(".text-tip-overlay").remove(),l.close(e)},o.time)):i=$(o.container);return n.append(i),"tip"===o.type&&i.parent().css("background","transparent"),l.reset(e),n.find(".dialog-close").click(function(){l.close(e)}),o.overlayClose&&d.click(function(){l.close(e)}),"function"==typeof o.success&&o.success(t.index,t),n},l.close=function(t){if(!t)return $(".overlay").remove(),void $(".dialog_box").remove();var e=$("#overlay"+t);e&&m.removeNode(e),m.removeNode($("#dialog_box"+t)),"function"==typeof o.end&&o.end()},l.reset=function(t){var e=$("#dialog_box"+t),a=e.width(),n=e.height();e.css({"margin-top":-n/2,"margin-left":-a/2})},c.run=function(){l.open=function(t){(o=m.getOptions(t)).type;return(new u).index}},void 0===(n=function(){return c.run(),l}.call(e,a,e,t))||(t.exports=n),l}.call(e,a,e,t))||(t.exports=n)},100:function(t,e,a){a(0);t.exports=function(t){var e="";return e+='<form class="comment-report" id="J_CommentReportForm"><div class="form-group"><label><input type="radio" name="reason" value="1">色情淫秽</label></div><div class="form-group"><label><input type="radio" name="reason" value="2">广告欺诈</label></div><div class="form-group"><label><input type="radio" name="reason" value="3">人身攻击</label></div><div class="form-group"><label><input type="radio" name="reason" value="4">反动言论</label></div><div class="form-group"><label><input type="radio" name="reason" value="5">其他</label></div><div class="form-group text-center"><button class="btn btn-primary" id="J_ReportConfirm" type="submit">确 定</button><button class="btn btn-gray" id="J_ReportCancel" type="button">取 消</button></div></form>'}},25:function(t,e,a){var n;function i(t,e,a){var n=$.trim(t.val()).length;e.html(n+"/"+a),n>a?e.addClass("overflow"):e.removeClass("overflow")}void 0===(n=function(){return function(t){var e=$("#"+t),a="[data-count-limit]";e.length&&(a=e.attr("data-count-limit")?"#"+t:"#"+t+" [data-count-limit]"),$(a).each(function(t,e){var a=$(e).attr("data-count-limit");if($(e).find(".count-limit").length)$(e).find(".count-limit").html("0/"+a);else{var n=$('<span class="count-limit"></span>'),o=$(e).children(":input"),r=o[0].nodeName,c=0,s=0,l=(o.outerHeight()-o.height())/2;switch($(e).prepend(n),i(o,n,a),r){case"TEXTAREA":o.css("padding-bottom",30),s=20;break;default:o.css("padding-right",45),s=5}setTimeout(function(){switch(r){case"TEXTAREA":c=o.outerHeight()-n.outerHeight()-l;break;default:c=(o.outerHeight()-n.outerHeight())/2}n.css({position:"absolute",right:s,top:c})},10),o.on("keyup",function(){i($(this),n,a)})}})}}.call(e,a,e,t))||(t.exports=n)},3:function(t,e,a){var n;void 0===(n=function(){function t(t){return-1!=document.cookie.indexOf("migu_music_status")||(!1!==t&&document.getElementById("J_LoginBtn").click(),!1)}return window.MUSIC_GLOBAL.loginCheck=t,t}.call(e,a,e,t))||(t.exports=n)},4:function(t,e){},49:function(t,e,a){var n=a(0);t.exports=function(t){var e,a="",i=t||{};return function(t,i,o){a+='<div class="comment-container">',!1!==o&&(a=a+'<div class="comment-title">'+(null==(e=o||"用户评论")?"":e)+"</div>"),a=a+'<form class="comment-form" id="J_CommentForm"><div class="media"><div class="media-body"><div class="form-group"><div class="form-control" id="J_CommentInput"'+n.attr("data-count-limit",t,!0,!0)+'><textarea id="J_CommentBody" name="commentBody"'+n.attr("placeholder",i,!0,!0)+'></textarea></div></div><div class="form-group text-right"><button class="btn btn-text btn-primary" type="submit">发表评论</button></div></div></div></form><span class="loading" id="comment_loading">评论加载中，请稍候...</span><div class="hot-comment comment-type"><div class="comment-content" id="J_comment_hot"></div></div><div class="newest-comment comment-type"><div class="comment-content" id="J_comment_newest"></div></div></div>'}.call(this,"countLimit"in i?i.countLimit:"undefined"!=typeof countLimit?countLimit:void 0,"placeholder"in i?i.placeholder:"undefined"!=typeof placeholder?placeholder:void 0,"title"in i?i.title:"undefined"!=typeof title?title:void 0),a}},5:function(t,e,a){var n=a(0);t.exports=function(t){var e,a="",i=t||{};return function(t,i,o){switch(o){case 1:var r="upload";break;default:r="loading"}a=a+"<div"+n.attr("class",n.classes([r],[!0]),!1,!0)+' id="loading">',t&&(a=a+"<span>"+n.escape(null==(e=i)?"":e)+"</span>"),a+="</div>"}.call(this,"showText"in i?i.showText:"undefined"!=typeof showText?showText:void 0,"text"in i?i.text:"undefined"!=typeof text?text:void 0,"type"in i?i.type:"undefined"!=typeof type?type:void 0),a}},77:function(t,e,a){var n;void 0===(n=function(){return function(t){var e,a=$("#"+t.id),n=a.find("a"),i=$(n[0]);return(t=t||{}).active?(t.active="#"+t.active,e=a.find('a[href="'+t.active+'"]')):(t.active=i.attr("href"),e=i),e.addClass("active").siblings().removeClass("active"),$(t.active).show(),"function"==typeof t.onTabsInit&&t.onTabsInit(e,$(t.active)),n.on("click",function(e){e.preventDefault();var a=$(this);a.addClass("active").siblings().removeClass("active");var n=a.attr("href");$(n).show().siblings().hide(),"function"==typeof t.onTabClick&&t.onTabClick(a,$(n))}),a}}.call(e,a,e,t))||(t.exports=n)},83:function(t,e,a){var n;void 0===(n=function(){"use strict";return{switcher:"/v2/async/getColumn",avatarAndNicknameSwitcher:"/v2/async/switcher/avatarAndNickname",listByDate:MUSIC_CONFIG.APP_API_PATH+"/comment/listComments",listByTop:MUSIC_CONFIG.APP_API_PATH+"/comment/listTopComments",add:MUSIC_CONFIG.APP_API_PATH+"/comment/addComment",like:MUSIC_CONFIG.APP_API_PATH+"/comment/likeComment",report:MUSIC_CONFIG.APP_API_PATH+"/comment/reportComment"}}.call(e,a,e,t))||(t.exports=n)},84:function(t,e,a){var n;void 0===(n=function(){"use strict";return{res:function(t){var e=(t=t||{}).data||{};return $.ajax({url:t.url,data:{count:e.pageSize||10,targetID:e.resId,startID:e.start||"",endID:e.end||""}})}}}.call(e,a,e,t))||(t.exports=n)},85:function(t,e,a){var n;void 0===(n=function(){"use strict";function t(t,e){var a,n,i,o=e.content.match(/(\[[^\[\]]*\])/g);if(o)for(var r=0;r<o.length;r+=1)n=t[o[r]],i=o[r].slice(1,-1),n&&(a='<img class="emoji-icon" src="'+n+'" alt="'+i+'" />',e.content=e.content.replace(o[r],a));return e}return function(e,a){for(var n={},i=0;i<e.length;i+=1)n[e[i].text]=e[i].image;for(i=0;i<a.length;i+=1)a[i]=t(n,a[i]),a[i].beReplied&&(a[i].beReplied=t(n,a[i].beReplied));return a}}.call(e,a,e,t))||(t.exports=n)},86:function(t,e,a){var n=a(0);t.exports=function(t){var e,a="",i=t||{};return function(t,i,o,r,c,s,l,d,m){o=!1!==o,i=!1!==i,r=!1!==r;var u=t.APP_CDN_HOST+t.APP_STATIC_PATH+"/img/common/header/default-head-login.png";a+='<div class="comment-list">',c.length>0?("h"===d?a+='<div class="comment-type-title">热门评论</div>':"n"===d&&(a+='<div class="comment-type-title">最新评论</div>'),function(){var r=c;if("number"==typeof r.length)for(var s=0,l=r.length;s<l;s++){var p="J_Reply"+(y=r[s]).commentID,f="J_ReplyInput"+y.commentID,v="J_ReplyEmoji"+y.commentID;if(y.uName=y.uName||y.author&&"咪咕用户"+y.author.slice(-4)||"咪咕用户",y.ext.targetNickName=y.ext.targetNickName||"咪咕用户",m.useDefaultAvatar&&(y.uName=y.author&&"咪咕用户"+y.author.slice(-4)||"咪咕用户",y.ext.targetNickName="咪咕用户"),a=a+'<div class="media"><div class="media-left"><a href="javascript:void(0);"'+n.attr("title",y.uName,!0,!0)+">",(!/\.(?:png|jpe?g|gif)$/.test(y.uAvatar)&&!/https?:\/\//.test(y.uAvatar)||m.useDefaultAvatar)&&(y.uAvatar=t.APP_CDN_HOST+t.APP_STATIC_PATH+"/img/common/header/default-head-login.png"),a=a+'<img class="media-object img-circle avatar"'+n.attr("src",u,!0,!0)+n.attr("data-src",y.uAvatar,!0,!0)+n.attr("alt",y.uName,!0,!0)+'></a></div><div class="media-body"><p><a class="name" href="javascript:void(0);"'+n.attr("title",y.uName,!0,!0)+">"+n.escape(null==(e=y.uName)?"":e)+"</a></p>",a=y.ext.targetNickName&&y.ext.targetcomment?a+'<pre class="text"><span class="reply-target">回复</span><a class="target-name" href="javascript:void(0);"'+n.attr("title",y.ext.targetNickName,!0,!0)+">"+n.escape(null==(e=y.ext.targetNickName)?"":e)+"</a>"+n.escape(null==(e=y.body.replace(/\n+/g,"\n"))?"":e)+"</pre>":a+'<pre class="text">'+n.escape(null==(e=y.body.replace(/\n+/g,"\n"))?"":e)+"</pre>",y.ext.targetNickName&&y.ext.targetcomment&&(a=a+'<div class="media"><div class="media-body"><pre class="text">'+n.escape(null==(e=y.ext.targetcomment)?"":e)+"</pre></div></div>"),a=a+'<div class="actions"'+n.attr("data-liked",y.liked,!0,!0)+n.attr("data-id",y.commentID,!0,!0)+">",i){var g=1===y.liked?"J_Like liked":"J_Like";a=a+"<a"+n.attr("class",n.classes(["like",g],[!1,!0]),!1,!0)+' href="javascript:void(0)" data-type="y"><i class="iconfont cf-dianzan">'+n.escape(null==(e=y.likedCount)?"":e)+"</i></a>"}o&&(a=a+'<a class="reply J_Reply" href="javascript:void(0)"'+n.attr("data-input",f,!0,!0)+n.attr("data-emoji",v,!0,!0)+'><i class="iconfont cf-pinglun"></i></a>'),a=a+'<span class="post-date">'+n.escape(null==(e=y.createTime)?"":e)+'</span></div><div class="media-footer">',o&&(a=a+'<div class="reply-form"'+n.attr("id",p,!0,!0)+'><div class="form-group"><div class="form-control"'+n.attr("id",f+"LimitCounter",!0,!0)+' data-count-limit="80"><input class="form-control"'+n.attr("id",f,!0,!0)+' type="text"'+n.attr("placeholder","回复 "+y.uName,!0,!0)+' maxlength="80"></div><div class="reply-actions"><button class="btn btn-primary btn-reply J_BtnReply"'+n.attr("data-type",d,!0,!0)+n.attr("data-id",y.commentID,!0,!0)+n.attr("data-resId",y.targetID,!0,!0)+n.attr("data-resTitle",y.resTitle,!0,!0)+n.attr("data-resType",y.resType,!0,!0)+n.attr("data-target-nickname",y.uName,!0,!0)+n.attr("data-target-comment",y.body,!0,!0)+'>回复</button><button class="btn btn-cancel J_BtnCancel"'+n.attr("data-id",y.commentID,!0,!0)+'>取消</button><div class="emoji"'+n.attr("id",v,!0,!0)+"></div></div></div></div>"),a+="</div></div></div>"}else for(var s in l=0,r){var y;l++,p="J_Reply"+(y=r[s]).commentID,f="J_ReplyInput"+y.commentID,v="J_ReplyEmoji"+y.commentID,y.uName=y.uName||y.author&&"咪咕用户"+y.author.slice(-4)||"咪咕用户",y.ext.targetNickName=y.ext.targetNickName||"咪咕用户",m.useDefaultAvatar&&(y.uName=y.author&&"咪咕用户"+y.author.slice(-4)||"咪咕用户",y.ext.targetNickName="咪咕用户"),a=a+'<div class="media"><div class="media-left"><a href="javascript:void(0);"'+n.attr("title",y.uName,!0,!0)+">",(!/\.(?:png|jpe?g|gif)$/.test(y.uAvatar)&&!/https?:\/\//.test(y.uAvatar)||m.useDefaultAvatar)&&(y.uAvatar=t.APP_CDN_HOST+t.APP_STATIC_PATH+"/img/common/header/default-head-login.png"),a=a+'<img class="media-object img-circle avatar"'+n.attr("src",u,!0,!0)+n.attr("data-src",y.uAvatar,!0,!0)+n.attr("alt",y.uName,!0,!0)+'></a></div><div class="media-body"><p><a class="name" href="javascript:void(0);"'+n.attr("title",y.uName,!0,!0)+">"+n.escape(null==(e=y.uName)?"":e)+"</a></p>",a=y.ext.targetNickName&&y.ext.targetcomment?a+'<pre class="text"><span class="reply-target">回复</span><a class="target-name" href="javascript:void(0);"'+n.attr("title",y.ext.targetNickName,!0,!0)+">"+n.escape(null==(e=y.ext.targetNickName)?"":e)+"</a>"+n.escape(null==(e=y.body.replace(/\n+/g,"\n"))?"":e)+"</pre>":a+'<pre class="text">'+n.escape(null==(e=y.body.replace(/\n+/g,"\n"))?"":e)+"</pre>",y.ext.targetNickName&&y.ext.targetcomment&&(a=a+'<div class="media"><div class="media-body"><pre class="text">'+n.escape(null==(e=y.ext.targetcomment)?"":e)+"</pre></div></div>"),a=a+'<div class="actions"'+n.attr("data-liked",y.liked,!0,!0)+n.attr("data-id",y.commentID,!0,!0)+">",i&&(g=1===y.liked?"J_Like liked":"J_Like",a=a+"<a"+n.attr("class",n.classes(["like",g],[!1,!0]),!1,!0)+' href="javascript:void(0)" data-type="y"><i class="iconfont cf-dianzan">'+n.escape(null==(e=y.likedCount)?"":e)+"</i></a>"),o&&(a=a+'<a class="reply J_Reply" href="javascript:void(0)"'+n.attr("data-input",f,!0,!0)+n.attr("data-emoji",v,!0,!0)+'><i class="iconfont cf-pinglun"></i></a>'),a=a+'<span class="post-date">'+n.escape(null==(e=y.createTime)?"":e)+'</span></div><div class="media-footer">',o&&(a=a+'<div class="reply-form"'+n.attr("id",p,!0,!0)+'><div class="form-group"><div class="form-control"'+n.attr("id",f+"LimitCounter",!0,!0)+' data-count-limit="80"><input class="form-control"'+n.attr("id",f,!0,!0)+' type="text"'+n.attr("placeholder","回复 "+y.uName,!0,!0)+' maxlength="80"></div><div class="reply-actions"><button class="btn btn-primary btn-reply J_BtnReply"'+n.attr("data-type",d,!0,!0)+n.attr("data-id",y.commentID,!0,!0)+n.attr("data-resId",y.targetID,!0,!0)+n.attr("data-resTitle",y.resTitle,!0,!0)+n.attr("data-resType",y.resType,!0,!0)+n.attr("data-target-nickname",y.uName,!0,!0)+n.attr("data-target-comment",y.body,!0,!0)+'>回复</button><button class="btn btn-cancel J_BtnCancel"'+n.attr("data-id",y.commentID,!0,!0)+'>取消</button><div class="emoji"'+n.attr("id",v,!0,!0)+"></div></div></div></div>"),a+="</div></div></div>"}}.call(this),s&&(a=a+'<div class="more-comment text-center"><button class="more J_More btn btn-link"'+n.attr("data-type",d,!0,!0)+">加载更多评论</button></div>")):l&&(a+='<div class="no-comment text-center"><span>路过围观，不如一起促膝长谈    </span></div>'),a+="</div>"}.call(this,"MUSIC_CONFIG"in i?i.MUSIC_CONFIG:"undefined"!=typeof MUSIC_CONFIG?MUSIC_CONFIG:void 0,"canLike"in i?i.canLike:"undefined"!=typeof canLike?canLike:void 0,"canReply"in i?i.canReply:"undefined"!=typeof canReply?canReply:void 0,"canReport"in i?i.canReport:"undefined"!=typeof canReport?canReport:void 0,"data"in i?i.data:"undefined"!=typeof data?data:void 0,"more"in i?i.more:"undefined"!=typeof more?more:void 0,"noComment"in i?i.noComment:"undefined"!=typeof noComment?noComment:void 0,"sort"in i?i.sort:"undefined"!=typeof sort?sort:void 0,"userProfile"in i?i.userProfile:"undefined"!=typeof userProfile?userProfile:void 0),a}},87:function(t,e,a){var n;void 0===(n=function(){return function(){var t=MUSIC_CONFIG.APP_CDN_HOST+MUSIC_CONFIG.APP_STATIC_PATH,e=MUSIC_CONFIG.MIGU_LOGIN_URL+MUSIC_CONFIG.SOURCE_ID,a=window.location.href,n=e+"&callbackURL="+encodeURIComponent(a),i=$('<div class="login-mask"></div>'),o=$("body").find(".login-mask");(o||o.length>0)&&i.remove(),$("body").append(i);var r=$('<div class="migu-login-ui iframe-wrap" id="login-container"><div class="login-close-ui" id="login-close-btn" title="关闭">×</div><img src='+t+'"/img/common/loginLoading.png" id="loginLoading" /><iframe name="loginIframe" id="loginIframe" allowtransparency="true" frameborder="0" scrolling="no" src="'+n+'"></iframe><div>');setTimeout(function(){$("#loginLoading").hide()},300);var c=$("body").find(".migu-login-ui");c&&c.length>0&&c.remove(),$("body").append(r),$("div").delegate("#login-close-btn","click",function(){$("body").find(".login-close-hide").remove(),$("body").find(".migu-login-ui").remove(),$("body").find(".login-mask").remove()})}}.call(e,a,e,t))||(t.exports=n)},98:function(t,e,a){var n;void 0===(n=function(){var t=a(83),e=a(84),n=a(99),i=(a(85),a(49)),o=a(86),r=(a(77),a(3)),c=(a(87),a(1).tip),s=a(25),l="J_comment_newest",d="J_CommentForm",m="J_CommentBody",u="n";function p(a,p){var f=!0;$.ajax({url:t.switcher+"/22158"}).then(function(v){if(v&&v.nodeName){var g=!1;"10"===v.nodeName&&(g=!0),g&&$.ajax({url:t.avatarAndNicknameSwitcher}).then(function(t){"20"!==t.switch&&(f=!1)},function(){}).always(function(){!function(){(a=a||{}).params=a.params||{};var v=a.params,g=(v.cookieId,v.resId),y=v.resType,h=v.pageSize,b=a.countLimit||50,_=i(a);function C(a){var i=t.listByTop;return a===u&&(i=t.listByDate),e.res({url:i,data:{resId:g,pageSize:a===u?h:5}}).then(function(t){if(t&&t.comments){if(t.comments.length){var e=t.comments[t.comments.length-1].commentID;v.startID=e}p=$.extend(p,{comment:a===u?"J_comment_newest":"J_comment_hot",pug:o,data:t.comments,more:t.more,params:v,sort:a,countLimit:b,userProfile:{useDefaultAvatar:f},onReply:function(){$("#J_CommentContainer").find(".no-comment").hide()}}),n(p),$("#J_CommentContainer .img-circle").lazyload({data_attribute:"src"})}else c("评论加载失败，请稍后再试")})}$("#"+a.comment).html(_),s("J_CommentInput"),$("#"+m).on("focus",function(){r()||$(this).blur()}),$("#"+d).submit(function(e){if(e.preventDefault(),r()){var n=$.trim($("#"+m).val());if(n.length)if(n.length<3||n.length>b)c("请输入3-"+b+"个字的评论内容");else{var i=$(this);i.hasClass("submitting")||(i.addClass("submitting"),$.ajax({url:t.add,data:{targetID:g,body:n,contentType:y},cache:!1}).then(function(t){if(t)switch(t.resultCode){case"0":"function"==typeof a.onComment&&a.onComment($("#"+m).val());var e=o({data:t.comments,canReply:!1,canLike:!1,canReport:!1,userProfile:{useDefaultAvatar:f}}),n=$("#"+l+" .comment-type-title");n.remove(),$("#"+l).children().prepend($(e).children()).prepend('<div class="comment-type-title">最新评论</div>'),$("#"+m).val(""),s("J_CommentInput"),c("评论成功！审核通过才能看到您的评论哦~"),$("#J_CommentContainer").find(".no-comment").hide(),$("#J_CommentContainer .img-circle").lazyload({data_attribute:"src"});break;default:c("评论失败，请稍后再试")}else c("评论失败，请稍后再试")}).always(function(){i.removeClass("submitting")}))}else c("请输入评论内容")}}),C("h"),C("n")}()})}},function(){})}return window.MUSIC_GLOBAL.comment=p,p}.call(e,a,e,t))||(t.exports=n)},99:function(t,e,a){var n;void 0===(n=function(){var t=a(83),e=a(84),n=(a(85),a(86)),i=a(100),o=a(25),r=a(1),c=a(3),s=(a(87),a(1).tip),l="more-comment",d="",m="J_comment_hot",u="J_comment_newest",p="n",f=0,v=0;return function(a){$("#comment_loading").remove(),v++,f+=a.data.length,a.noComment=!1,2==v&&0==f&&(a.noComment=!0),(a=a||{}).params=a.params||{};var g=a.params,y=(g.cookieId,g.resType),h=(a.emojis,a.sort,a.countLimit),b=a.userProfile,_=a.pug,C=_(a),x=$("#"+a.comment);x.html(C),(C=x.children()).on("click",".J_Reply",function(){if(c()){var t=$(this).parent().attr("data-id"),e=$("#J_Reply"+t),a=$(this).attr("data-input"),n=($(this).attr("data-emoji"),$("#"+a+"LimitCounter").find(".count-limit"));e.toggle(),e.is(":visible")&&$("#"+a).focus(),n.length||o(a+"LimitCounter")}}),C.on("click",".reply-form button.J_BtnReply",function(){if(c()){var e=$(this).data("type");d="h"===e?m:u;var i=$(this),r=i.attr("data-id"),l=i.attr("data-resId"),p=(i.attr("data-resTitle"),i.attr("data-target-nickname")),f=i.attr("data-target-comment"),v=$("#J_Reply"+r),g=$("#J_ReplyInput"+r),_="J_ReplyInput"+r+"LimitCounter",C=$.trim(g.val());C.length?C.length<3||C.length>h?s("请输入3-"+h+"个字的评论内容"):i.hasClass("submitting")||(i.addClass("submitting"),$.ajax({url:t.add,data:{targetID:l,contentType:y,body:C,targetNickName:p,targetcomment:f},cache:!1}).then(function(t){if(t)switch(t.resultCode){case"0":var e=n({data:t.comments,userProfile:b,canReply:!1,canLike:!1,canReport:!1}),i=$("#"+d+" .comment-type-title"),r=i.text();i.remove(),$("#"+d).children().prepend($(e).children()).prepend('<div class="comment-type-title">'+r+"</div>"),"function"==typeof a.onReply&&a.onReply(C),g.val(""),o(_),v.toggle(),$("#J_CommentContainer .img-circle").lazyload({data_attribute:"src"}),s("回复成功！审核通过才能看到您的回复哦~");break;default:s("回复失败，请稍后再试")}else s("评论失败，请稍后再试")}).always(function(){i.removeClass("submitting")})):s("请输入评论内容")}}),C.on("click",".reply-form button.J_BtnCancel",function(){var t=$(this).attr("data-id");$("#J_Reply"+t).hide()}),C.on("click",".J_Like, .J_Dislike",function(){if(c()){var e=$(this),a=e.children(),n=e.parent().attr("data-id"),i=e.parent().attr("data-liked");i=parseInt(i),e.attr("data-type");var o=parseInt(a.text());e.hasClass("submitting")||(e.addClass("submitting"),$.ajax({url:t.like,data:{commentId:n},cache:!1}).then(function(t){if(t)switch(t.resultCode){case"0":switch(i){case 0:a.text(o+1),e.parent().attr("data-liked",1),e.addClass("liked");break;case 1:a.text(o-1),e.parent().attr("data-liked",0),e.removeClass("liked")}break;default:s("点赞失败，请稍后再试")}else s("点赞失败，请稍后再试")}).always(function(){e.removeClass("submitting")}))}}),C.on("click",".J_Report",function(){if(c()){var e,a=$(this).parent().attr("data-id"),n=i();r.open({title:"举报评论",container:n,success:function(n){$("#J_ReportConfirm").click(function(i){if(i.preventDefault(),e=$("#J_CommentReportForm").serialize()){var o=$(this);o.hasClass("submitting")||(o.addClass("submitting"),$.ajax({url:t.report+"?"+e,data:{commentId:a},cache:!1}).then(function(t){if(t)switch(t.resultCode){case"0":s("举报成功"),r.close(n);break;default:s("举报失败，请稍后再试")}else s("举报失败，请稍后再试")}).always(function(){o.removeClass("submitting")}))}else s("请选择举报理由")}),$("#J_ReportCancel").click(function(){r.close(n)})}})}});var k=g.startID;return C.on("click",".J_More",function(){var a,n=$(this);n.text("加载中，请稍候...");var i=$(this).data("type");d="h"===i?m:u,n.hasClass("submitting")||(n.addClass("submitting"),a=i===p?t.listByDate:t.listByTop,e.res({url:a,data:{resId:g.resId,pageSize:g.pageSize,start:k}}).then(function(t){if(t){n.text("加载更多评论"),t.comments.length&&(k=t.comments[t.comments.length-1].commentID);var e=_({data:t.comments,userProfile:b,more:t.more});e=$(e).children(),$("."+l).remove(),$("#"+d).children().append(e),$("#J_CommentContainer .img-circle").lazyload({data_attribute:"src"}),0===t.more&&$("."+l).remove()}else s("加载失败，请稍后再试")}).always(function(){n.removeClass("submitting")}))}),"function"==typeof a.done&&a.done(),x}}.call(e,a,e,t))||(t.exports=n)}},[[98,0]]]);